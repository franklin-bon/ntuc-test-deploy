{"ast":null,"code":"var _jsxFileName = \"/Users/user/ntuc-app/src/components/home.js\";\nimport React, { Component } from 'react';\nimport { Container, Row, Col } from 'react-bootstrap';\nimport imgBanner from '../img/banner-home.jpg';\nimport * as config from '../config.js';\n\nclass Home extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      homeTiles: [],\n      tiles: [],\n      tiles_mobile: []\n    };\n  }\n\n  getLocalData() {\n    if (localStorage.getItem('homeTiles')) {\n      //get data from local storage\n      var localData = JSON.parse(localStorage.getItem('homeTiles'));\n      this.setState({\n        homeTiles: localData\n      });\n      console.log(\"Using data from local.\");\n    }\n  }\n\n  dataTiles(arr) {\n    const ORIGDATA = arr.data;\n    const COUNT_ORIG = ORIGDATA.length;\n    var MAINSET = [];\n    var MAIN_COUNT = 0;\n\n    if (COUNT_ORIG > 0) {\n      MAIN_COUNT++;\n      var NEWSET = [];\n      var COUNT = 0;\n      ORIGDATA.forEach(function (key) {\n        COUNT++;\n        NEWSET.push({\n          id: COUNT,\n          jobid: key.jobid,\n          ttl: key.jobttl,\n          img: key.img\n        });\n        const MODULUS_CON = COUNT % 3;\n\n        if (COUNT_ORIG === COUNT) {\n          MAINSET.push({\n            main_count: MAIN_COUNT,\n            data: NEWSET\n          });\n\n          if (COUNT_ORIG > 3) {\n            const MODULUS_MISSING = COUNT % 3;\n\n            if (MODULUS_MISSING === 1) {\n              COUNT++;\n              NEWSET.push({\n                id: COUNT,\n                jobid: \"\",\n                ttl: \"\",\n                img: \"\"\n              });\n              COUNT++;\n              NEWSET.push({\n                id: COUNT,\n                jobid: \"\",\n                ttl: \"\",\n                img: \"\"\n              });\n            } else if (MODULUS_MISSING === 2) {\n              COUNT++;\n              NEWSET.push({\n                id: COUNT,\n                jobid: \"\",\n                ttl: \"\",\n                img: \"\"\n              });\n            }\n          }\n        } else if (MODULUS_CON === 0) {\n          MAINSET.push({\n            main_count: MAIN_COUNT,\n            data: NEWSET\n          });\n          NEWSET = [];\n          MAIN_COUNT++;\n        }\n      });\n    }\n\n    this.setState({\n      tiles: MAINSET\n    });\n  }\n\n  dataTilesMobile(arr) {\n    const ORIGDATA = arr.data;\n    const COUNT_ORIG = ORIGDATA.length;\n    var MAINSET = [];\n    var MAIN_COUNT = 0;\n\n    if (COUNT_ORIG > 0) {\n      MAIN_COUNT++;\n      var NEWSET = [];\n      var COUNT = 0;\n      ORIGDATA.forEach(function (key) {\n        COUNT++;\n        NEWSET.push({\n          id: COUNT,\n          jobid: key.jobid,\n          ttl: key.jobttl,\n          img: key.img\n        });\n        const MODULUS_CON = COUNT % 2;\n\n        if (COUNT_ORIG === COUNT) {\n          MAINSET.push({\n            main_count: MAIN_COUNT,\n            data: NEWSET\n          });\n\n          if (COUNT_ORIG > 2) {\n            const MODULUS_MISSING = COUNT % 2;\n\n            if (MODULUS_MISSING === 1) {\n              COUNT++;\n              NEWSET.push({\n                id: COUNT,\n                jobid: \"\",\n                ttl: \"\",\n                img: \"\"\n              });\n            }\n          }\n        } else if (MODULUS_CON === 0) {\n          MAINSET.push({\n            main_count: MAIN_COUNT,\n            data: NEWSET\n          });\n          NEWSET = [];\n          MAIN_COUNT++;\n        }\n      });\n    }\n\n    this.setState({\n      tiles_mobile: MAINSET\n    });\n  }\n\n  handleApiRequest() {\n    let API_URL = config.API_HOMETILES;\n    let API_KIOSID = config.API_KIOSKID; //--- get local data first ---//\n\n    this.getLocalData(); //--- api request ---//\n\n    var formData = new FormData();\n    formData.append('kioskid', API_KIOSID);\n    fetch(API_URL, {\n      method: 'POST',\n      body: formData\n    }).then(response => {\n      return response.json();\n    }).then(json => {\n      console.log(\"Result:\", json);\n\n      if (json.code === \"00\") {\n        this.dataTiles(json);\n        this.dataTilesMobile(json);\n        this.setState({\n          homeTiles: json.data\n        });\n        localStorage.setItem('homeTiles', JSON.stringify(json.data)); //stored api data to local storage\n      }\n    }).catch(error => {\n      console.log('There has been a problem with fetching (Job List API): ', error);\n    });\n  }\n\n  componentDidMount() {\n    this.handleApiRequest();\n    config.getLocationId(this.props);\n  }\n\n  nextStep(jobId) {\n    const LOCID = config.getLocationId(this.props) === \"\" ? \"\" : \"&locid=\" + config.getLocationId(this.props);\n    console.log(\"Job ID:\", jobId);\n    localStorage.setItem('newData', JSON.stringify({\n      jobid: jobId\n    }));\n    window.location.href = \"job/online-picker?id=\" + jobId + LOCID;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"contnr\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(Container, {\n      style: {\n        marginBottom: \"20px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: imgBanner,\n      alt: \"header banner\",\n      style: {\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    })), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 12,\n      md: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"home-hdr\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"JOB OPPORTUNITIES\"))), this.state.tiles.map(keys => React.createElement(Row, {\n      key: keys.main_count,\n      className: \"version-web\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, keys.data.map(key => React.createElement(Col, {\n      key: key.jobid,\n      className: \"home-tileweb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: key.img,\n      alt: key.ttl,\n      className: key.ttl === '' ? 'home-tileimg hide' : 'home-tileimg',\n      onClick: () => this.nextStep(key.jobid),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: key.ttl === '' ? 'home-subtle hide' : 'home-subtle',\n      onClick: () => this.nextStep(key.jobid),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, key.ttl))))), React.createElement(Row, {\n      id: \"version-mobile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 12,\n      md: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      style: {\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, this.state.tiles_mobile.map(keys => React.createElement(\"tr\", {\n      key: keys.main_count,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, keys.data.map(key => React.createElement(\"td\", {\n      key: key.jobid,\n      className: \"home-tblcol\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: key.img,\n      alt: key.ttl,\n      className: key.ttl === '' ? 'home-tileimg hide' : 'home-tileimg',\n      onClick: () => this.nextStep(key.jobid),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: key.ttl === '' ? 'homem-subtle hide' : 'homem-subtle',\n      onClick: () => this.nextStep(key.jobid),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, key.ttl)))))))))));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/user/ntuc-app/src/components/home.js"],"names":["React","Component","Container","Row","Col","imgBanner","config","Home","state","homeTiles","tiles","tiles_mobile","getLocalData","localStorage","getItem","localData","JSON","parse","setState","console","log","dataTiles","arr","ORIGDATA","data","COUNT_ORIG","length","MAINSET","MAIN_COUNT","NEWSET","COUNT","forEach","key","push","id","jobid","ttl","jobttl","img","MODULUS_CON","main_count","MODULUS_MISSING","dataTilesMobile","handleApiRequest","API_URL","API_HOMETILES","API_KIOSID","API_KIOSKID","formData","FormData","append","fetch","method","body","then","response","json","code","setItem","stringify","catch","error","componentDidMount","getLocationId","props","nextStep","jobId","LOCID","window","location","href","render","marginBottom","width","map","keys"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Container, Row, Col } from 'react-bootstrap';\nimport imgBanner from '../img/banner-home.jpg';\nimport * as config from '../config.js';\n\nclass Home extends Component {\n    \n    state = {\n        homeTiles:[],\n        tiles:[],\n        tiles_mobile:[]\n    }\n    \n    getLocalData() {\n        if (localStorage.getItem('homeTiles')) { //get data from local storage\n            var localData = JSON.parse(localStorage.getItem('homeTiles'));\n            this.setState({ homeTiles:localData });\n            console.log(\"Using data from local.\");\n        }\n    }\n    \n    dataTiles(arr) {\n        const ORIGDATA = arr.data;\n        const COUNT_ORIG = ORIGDATA.length;\n        var MAINSET = [];\n        var MAIN_COUNT = 0;\n        if (COUNT_ORIG > 0) {\n            MAIN_COUNT++;\n            var NEWSET = [];\n            var COUNT = 0;\n            ORIGDATA.forEach(function(key) {\n                COUNT++;\n                NEWSET.push({ id:COUNT, jobid:key.jobid, ttl:key.jobttl, img:key.img });\n                const MODULUS_CON = COUNT % 3;\n                if (COUNT_ORIG === COUNT) {\n                    MAINSET.push({ main_count:MAIN_COUNT, data:NEWSET });\n                    if (COUNT_ORIG > 3) {\n                        const MODULUS_MISSING = COUNT % 3;\n                        if (MODULUS_MISSING === 1) {\n                            COUNT++;\n                            NEWSET.push({ id:COUNT, jobid:\"\", ttl:\"\", img:\"\" });\n                            COUNT++;\n                            NEWSET.push({ id:COUNT, jobid:\"\", ttl:\"\", img:\"\" });\n                        } else if (MODULUS_MISSING === 2) {\n                            COUNT++;\n                            NEWSET.push({ id:COUNT, jobid:\"\", ttl:\"\", img:\"\" });\n                        }\n                    } \n                } else if (MODULUS_CON === 0) {\n                    MAINSET.push({ main_count:MAIN_COUNT, data:NEWSET });\n                    NEWSET = [];\n                    MAIN_COUNT++;\n                }       \n            });\n        }\n        this.setState({ tiles:MAINSET });\n    }\n    \n    dataTilesMobile(arr) {\n        const ORIGDATA = arr.data;\n        const COUNT_ORIG = ORIGDATA.length;\n        var MAINSET = [];\n        var MAIN_COUNT = 0;\n        if (COUNT_ORIG > 0) {\n            MAIN_COUNT++;\n            var NEWSET = [];\n            var COUNT = 0;\n            ORIGDATA.forEach(function(key) {\n                COUNT++;\n                NEWSET.push({ id:COUNT, jobid:key.jobid, ttl:key.jobttl, img:key.img });\n                const MODULUS_CON = COUNT % 2;\n                if (COUNT_ORIG === COUNT) {\n                    MAINSET.push({ main_count:MAIN_COUNT, data:NEWSET });\n                    if (COUNT_ORIG > 2) {\n                        const MODULUS_MISSING = COUNT % 2;\n                        if (MODULUS_MISSING === 1) {\n                            COUNT++;\n                            NEWSET.push({ id:COUNT, jobid:\"\", ttl:\"\", img:\"\" });\n                        }\n                    }\n                } else if (MODULUS_CON === 0) {\n                    MAINSET.push({ main_count:MAIN_COUNT, data:NEWSET });\n                    NEWSET = [];\n                    MAIN_COUNT++;\n                }   \n            });\n        }\n        this.setState({ tiles_mobile:MAINSET });\n    }\n    \n    handleApiRequest() {\n        let API_URL = config.API_HOMETILES;\n        let API_KIOSID = config.API_KIOSKID;\n        \n        //--- get local data first ---//\n        this.getLocalData();\n        \n        //--- api request ---//\n        var formData = new FormData();\n        formData.append('kioskid', API_KIOSID);\n        fetch(API_URL, {\n            method: 'POST',\n            body: formData\n        }).then(response => {\n            return response.json();\n        }).then(json => {\n            console.log(\"Result:\", json);\n            if (json.code === \"00\") {\n                this.dataTiles(json);\n                this.dataTilesMobile(json);\n                this.setState({ homeTiles:json.data });\n                localStorage.setItem('homeTiles', JSON.stringify(json.data)); //stored api data to local storage\n            }\n        }).catch(error => {\n            console.log('There has been a problem with fetching (Job List API): ',error);\n        });\n    }\n        \n    componentDidMount() {\n        this.handleApiRequest();\n        config.getLocationId(this.props);\n    }\n    \n    nextStep(jobId) {\n        const LOCID = config.getLocationId(this.props) === \"\" ? \"\" : \"&locid=\"+config.getLocationId(this.props);\n        console.log(\"Job ID:\", jobId);\n        localStorage.setItem('newData', JSON.stringify({ jobid:jobId }));\n        window.location.href = \"job/online-picker?id=\"+jobId+LOCID;\n    }\n\n    render() { \n        return (\n            <div className=\"contnr\" >\n                <Container style={{ marginBottom:\"20px\" }}>\n                    <Row>\n                        <img \n                            src={imgBanner}\n                            alt=\"header banner\"\n                            style={{ width:\"100%\" }}\n                        />\n                    </Row>\n                    <Row>\n                        <Col xs={12} md={12}>\n                            <div className=\"home-hdr\" >\n                                JOB OPPORTUNITIES\n                            </div>\n                        </Col>\n                    </Row>\n                    {\n                        this.state.tiles.map( keys => (\n                            <Row key={keys.main_count} className=\"version-web\" >\n                                {\n                                    keys.data.map( key => (\n                                        <Col key={key.jobid} className=\"home-tileweb\">\n                                            <img \n                                                src={key.img}\n                                                alt={key.ttl}\n                                                className={ key.ttl === '' ? 'home-tileimg hide' : 'home-tileimg' }\n                                                onClick={() => this.nextStep(key.jobid)}\n                                            />\n                                            <div \n                                                className={ key.ttl === '' ? 'home-subtle hide' : 'home-subtle' } \n                                                onClick={() => this.nextStep(key.jobid)}\n                                            >\n                                                {key.ttl}\n                                            </div>\n                                        </Col>\n                                    ))\n                                }\n                            </Row>      \n                        ))\n                    }\n                    <Row id=\"version-mobile\" >\n                        <Col xs={12} md={12}>\n                            <table style={{ width:\"100%\" }}>\n                                <tbody>\n                                    {\n                                        this.state.tiles_mobile.map( keys => (\n                                             <tr key={keys.main_count} >\n                                                {\n                                                    keys.data.map( key => (\n                                                        <td key={key.jobid} className=\"home-tblcol\">\n                                                            <img \n                                                                src={key.img}\n                                                                alt={key.ttl}\n                                                                className={ key.ttl === '' ? 'home-tileimg hide' : 'home-tileimg' }\n                                                                onClick={() => this.nextStep(key.jobid)}\n                                                            />\n                                                            <div className={ key.ttl === '' ? 'homem-subtle hide' : 'homem-subtle' } onClick={() => this.nextStep(key.jobid)} >\n                                                                {key.ttl}\n                                                            </div>\n                                                        </td>\n                                                    ))\n                                                }\n                                            </tr>  \n                                        ))\n                                    }\n                                </tbody>\n                            </table>\n                        </Col>\n                    </Row>\n                </Container>\n            </div>\n        );\n    }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}